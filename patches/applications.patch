Index: applications/product/src/org/ofbiz/product/imagemanagement/ImageManagementServices.java
===================================================================
--- applications/product/src/org/ofbiz/product/imagemanagement/ImageManagementServices.java	(revision 1470483)
+++ applications/product/src/org/ofbiz/product/imagemanagement/ImageManagementServices.java	(working copy)
@@ -93,6 +93,7 @@
         String uploadFileName = (String) context.get("_uploadedFile_fileName");
         String imageResize = (String) context.get("imageResize");
         Locale locale = (Locale) context.get("locale");
+        Long sequenceNum = (Long) context.get("sequenceNum");
         
         if (UtilValidate.isNotEmpty(uploadFileName)) {
             String imageFilenameFormat = UtilProperties.getPropertyValue("catalog", "image.filename.format");
@@ -258,6 +259,7 @@
             productContentCtx.put("userLogin", userLogin);
             productContentCtx.put("contentId", contentId);
             productContentCtx.put("statusId", "IM_PENDING");
+            productContentCtx.put("sequenceNum", sequenceNum);
             try {
                 dispatcher.runSync("createProductContent", productContentCtx);
             } catch (GenericServiceException e) {
Index: applications/product/script/org/ofbiz/product/category/CategoryServices.xml
===================================================================
--- applications/product/script/org/ofbiz/product/category/CategoryServices.xml	(revision 1470483)
+++ applications/product/script/org/ofbiz/product/category/CategoryServices.xml	(working copy)
@@ -277,6 +277,9 @@
         </if-empty>
 
         <create-value value-field="newEntity"/>
+        <field-to-result field="newEntity.productCategoryId" result-name="productCategoryId"/>
+        <field-to-result field="newEntity.parentProductCategoryId" result-name="parentProductCategoryId"/>
+        <field-to-result field="newEntity.fromDate" result-name="fromDate"/>
     </simple-method>
     <simple-method method-name="addProductCategoryToCategories" short-description="Add ProductCategory to Categories">
         <if-instance-of field="parameters.categories" class="java.util.List">
@@ -334,6 +337,8 @@
         <set-nonpk-fields map="parameters" value-field="lookedUpValue"/>
         <store-value value-field="lookedUpValue"/>
         <field-to-result field="parameters.productCategoryId" result-name="productCategoryId"/>
+        <field-to-result field="parameters.parentProductCategoryId" result-name="parentProductCategoryId"/>
+        <field-to-result field="parameters.fromDate" result-name="fromDate"/>
     </simple-method>
     <simple-method method-name="removeProductCategoryFromCategory" short-description="Remove ProductCategory From Category">
         <set value="removeProductCategoryFromCategory" field="callingMethodName"/>
Index: applications/product/servicedef/services.xml
===================================================================
--- applications/product/servicedef/services.xml	(revision 1470483)
+++ applications/product/servicedef/services.xml	(working copy)
@@ -840,9 +840,9 @@
     <service name="safeAddProductCategoryToCategory" engine="simple"
                 location="component://product/script/org/ofbiz/product/category/CategoryServices.xml" invoke="addProductCategoryToCategory" auth="true">
         <description>Safe Add ProductCategory To Category (requires fromDate)</description>
-        <attribute name="productCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="parentProductCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
+        <attribute name="productCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="parentProductCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="fromDate" type="Timestamp" mode="INOUT" optional="false"/>
         <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
         <attribute name="sequenceNum" type="Long" mode="IN" optional="true"/>
     </service>
@@ -869,8 +869,8 @@
                 location="component://product/script/org/ofbiz/product/category/CategoryServices.xml" invoke="updateProductCategoryToCategory" auth="true">
         <description>Update ProductCategory To Category</description>
         <attribute name="productCategoryId" type="String" mode="INOUT" optional="false"/>
-        <attribute name="parentProductCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
+        <attribute name="parentProductCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="fromDate" type="Timestamp" mode="INOUT" optional="false"/>
         <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
         <attribute name="sequenceNum" type="Long" mode="IN" optional="true"/>
     </service>
Index: applications/product/servicedef/services.xml
===================================================================
--- applications/product/servicedef/services.xml	(revision 1470483)
+++ applications/product/servicedef/services.xml	(working copy)
@@ -840,9 +840,9 @@
     <service name="safeAddProductCategoryToCategory" engine="simple"
                 location="component://product/script/org/ofbiz/product/category/CategoryServices.xml" invoke="addProductCategoryToCategory" auth="true">
         <description>Safe Add ProductCategory To Category (requires fromDate)</description>
-        <attribute name="productCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="parentProductCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
+        <attribute name="productCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="parentProductCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="fromDate" type="Timestamp" mode="INOUT" optional="false"/>
         <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
         <attribute name="sequenceNum" type="Long" mode="IN" optional="true"/>
     </service>
@@ -869,8 +869,8 @@
                 location="component://product/script/org/ofbiz/product/category/CategoryServices.xml" invoke="updateProductCategoryToCategory" auth="true">
         <description>Update ProductCategory To Category</description>
         <attribute name="productCategoryId" type="String" mode="INOUT" optional="false"/>
-        <attribute name="parentProductCategoryId" type="String" mode="IN" optional="false"/>
-        <attribute name="fromDate" type="Timestamp" mode="IN" optional="false"/>
+        <attribute name="parentProductCategoryId" type="String" mode="INOUT" optional="false"/>
+        <attribute name="fromDate" type="Timestamp" mode="INOUT" optional="false"/>
         <attribute name="thruDate" type="Timestamp" mode="IN" optional="true"/>
         <attribute name="sequenceNum" type="Long" mode="IN" optional="true"/>
     </service>
Index: applications/party/webapp/partymgr/WEB-INF/controller.xml
===================================================================
--- applications/party/webapp/partymgr/WEB-INF/controller.xml	(revision 1470483)
+++ applications/party/webapp/partymgr/WEB-INF/controller.xml	(working copy)
@@ -1246,6 +1246,17 @@
         <security https="true" auth="true"/>
         <response name="success" type="view" value="ProfileEditUserLoginSecurityGroups"/>
     </request-map>
+    
+    <request-map uri="approvalseller">
+        <security https="true" auth="true"/>
+        <response name="success" type="view" value="approvalseller"/>
+    </request-map>
+    <request-map uri="approveShopmaxSeller">
+        <security https="true" auth="true"/>
+        <event type="service" path="" invoke="approveShopmaxSeller"/>
+        <response name="success" type="view" value="approvalseller"/>
+        <response name="error" type="view" value="approvalseller"/>
+    </request-map>
 
     <!-- end of request mappings -->
 
@@ -1376,5 +1387,7 @@
     <!-- GeoLocation-->
     <view-map name="addGeoLocation" type="screen" page="component://party/widget/partymgr/PartyScreens.xml#EditGeoLocation"/>
 
+    <view-map name="approvalseller" type="screen" page="component://shopmax/widget/ShopMaxScreens.xml#ApprovalSeller"/>
+
     <!-- end of view mappings -->
 </site-conf>
Index: applications/product/script/org/ofbiz/product/product/ProductServices.xml
===================================================================
--- applications/product/script/org/ofbiz/product/product/ProductServices.xml	(revision 1470483)
+++ applications/product/script/org/ofbiz/product/product/ProductServices.xml	(working copy)
@@ -33,6 +33,13 @@
         <set from-field="parameters.productId" field="newEntity.productId"/>
         <if-empty field="newEntity.productId">
             <sequenced-id sequence-name="Product" field="newEntity.productId"/>
+            <entity-and entity-name="PartyRole" list="partyRoles">
+                <field-map field-name="roleTypeId" value="SELLER"/>
+            </entity-and>
+            <if-not-empty field="partyRoles">
+                <first-from-list entry="partyRole" list="partyRoles"/>
+                <set field="newEntity.productId" value="${partyRole.partyId}-${newEntity.productId}"/>
+            </if-not-empty>
         <else>
             <check-id field="newEntity.productId"/>
             <check-errors />
